{% load static humanize %}
{% include "portfolio/filters_home.html" %}
<section class="projects section-projects2 pt50 pb100" style="z-index: auto;">
  <div class="container">
    <div class="projects-grid" id="propertiesGrid">
      {% for prop in featured_properties %}
      <a href="#" class="project-card project-card--lg{% if forloop.counter == 2 %} project-card--align-end{% endif %}"
         data-id="{{ prop.id }}"
         data-title="{{ prop.title }}"
         data-type="{{ prop.property_type.name|default:'Property' }}"
         data-location="{{ prop.location.name|default:'Bali' }}"
         data-image="{% if prop.image %}{{ prop.image.url }}{% else %}{% static 'images/placeholder.jpg' %}{% endif %}">
        <div class="pc-img" style="--img:url('{% if prop.image %}{{ prop.image.url }}{% else %}{% static 'images/placeholder.jpg' %}{% endif %}')">
          <div class="pc-tags">
            <span class="tag">{{ prop.property_type.name|default:"Property" }}</span>
            {% if prop.price_min %}
            <span class="tag">From ${{ prop.price_min|floatformat:0|intcomma }}</span>
            {% endif %}
          </div>
        </div>
        <div class="pc-meta">
          <h3 class="pc-title">
            <span class="dot" aria-hidden="true"></span>
            {{ prop.title }}
            <i class="wdt-button__icon" aria-hidden="true"></i>
          </h3>
          <div class="pc-loc">{{ prop.location.name|default:"Bali" }}</div>
        </div>
      </a>
      {% empty %}
      <p class="text-center text-white">No properties available</p>
      {% endfor %}
    </div>
    <div class="projects-cta mt70">
      <a href="{% url 'projects' %}" class="wdt-button button-cta is-nm concierge-cta">
        View full catalog <i class="wdt-button__icon" aria-hidden="true"></i>
      </a>
    </div>
  </div>
</section>