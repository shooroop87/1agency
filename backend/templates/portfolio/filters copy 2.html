{% load static %}
<section class="concierge section-projects">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="projects-heads">
          <h2 class="projects-title h2 mt60 mt40-xs">All projects</h2>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="pt50 pb90 filters-section">
  <div class="container">
    <div class="row">
      <div class="col-12 col-lg-9">

        <!-- Desktop version -->
        <div class="filters-desktop">
          <div class="filters-wrapper2">
            <div class="filter-column col-2 mb10" data-filter="type">
              <div class="filter-header">
                <span class="cf-dot"></span>
                <h6>Type</h6>
              </div>
            </div>
            <div class="filter-column col-2 mb10" data-filter="area">
              <div class="filter-header">
                <span class="cf-dot"></span>
                <h6>Area</h6>
              </div>
            </div>
            <div class="filter-column col-2 mb10" data-filter="rooms">
              <div class="filter-header">
                <span class="cf-dot"></span>
                <h6>Rooms</h6>
              </div>
            </div>
            <div class="filter-column col-3 mb10" data-filter="price">
              <div class="filter-header">
                <span class="cf-dot"></span>
                <h6>Price</h6>
              </div>
            </div>
            <div class="filter-column col-2 mb10" data-filter="status">
              <div class="filter-header">
                <span class="cf-dot"></span>
                <h6>Status</h6>
              </div>
            </div>
          </div>
          <div class="filter-divider mb20"></div>

          <div class="filters-wrapper">
            
            <!-- Type - из БД -->
            <div class="filter-column col-2" data-filter="type">
              <div class="filter-options">
                <label class="filter-checkbox">
                  <input type="checkbox" value="all" checked>
                  <span class="checkmark"></span>
                  <span class="label-text">All types</span>
                </label>
                {% for pt in property_types %}
                <label class="filter-checkbox">
                  <input type="checkbox" value="{{ pt.slug }}">
                  <span class="checkmark"></span>
                  <span class="label-text">{{ pt.name }}</span>
                </label>
                {% endfor %}
              </div>
            </div>

            <!-- Area - из БД -->
            <div class="filter-column col-2" data-filter="area">
              <div class="filter-options">
                <label class="filter-checkbox">
                  <input type="checkbox" value="all" checked>
                  <span class="checkmark"></span>
                  <span class="label-text">All areas</span>
                </label>
                {% for loc in locations %}
                <label class="filter-checkbox">
                  <input type="checkbox" value="{{ loc.slug }}">
                  <span class="checkmark"></span>
                  <span class="label-text">{{ loc.name }}</span>
                </label>
                {% endfor %}
              </div>
            </div>

            <!-- Rooms - статичный -->
            <div class="filter-column col-2" data-filter="rooms">
              <div class="filter-options">
                <label class="filter-checkbox">
                  <input type="checkbox" value="all" checked>
                  <span class="checkmark"></span>
                  <span class="label-text">Any sizes</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="studio">
                  <span class="checkmark"></span>
                  <span class="label-text">Studio</span>
                </label>
                {% for i in "1234567" %}
                <label class="filter-checkbox">
                  <input type="checkbox" value="{{ i }}">
                  <span class="checkmark"></span>
                  <span class="label-text">{{ i }}BD</span>
                </label>
                {% endfor %}
              </div>
            </div>

            <!-- Price -->
            <div class="filter-column col-3" data-filter="price">
              <div class="filter-options">
                <label class="filter-checkbox">
                  <input type="checkbox" value="all" checked>
                  <span class="checkmark"></span>
                  <span class="label-text">Any price</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="up_to_100k">
                  <span class="checkmark"></span>
                  <span class="label-text">Up to $100,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="100k_150k">
                  <span class="checkmark"></span>
                  <span class="label-text">$100,000-$150,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="150k_200k">
                  <span class="checkmark"></span>
                  <span class="label-text">$150,000-$200,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="200k_300k">
                  <span class="checkmark"></span>
                  <span class="label-text">$200,000-$300,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="300k_500k">
                  <span class="checkmark"></span>
                  <span class="label-text">$300,000-$500,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="500k_700k">
                  <span class="checkmark"></span>
                  <span class="label-text">$500,000-$700,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="700k_1m">
                  <span class="checkmark"></span>
                  <span class="label-text">$700,000-$1,000,000</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="over_1m">
                  <span class="checkmark"></span>
                  <span class="label-text">From $1,000,000</span>
                </label>
              </div>
            </div>

            <!-- Status -->
            <div class="filter-column col-2" data-filter="status">
              <div class="filter-options">
                <label class="filter-checkbox">
                  <input type="checkbox" value="all" checked>
                  <span class="checkmark"></span>
                  <span class="label-text">All statuses</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="off_plan">
                  <span class="checkmark"></span>
                  <span class="label-text">Off-plan</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="construction">
                  <span class="checkmark"></span>
                  <span class="label-text">Under Construction</span>
                </label>
                <label class="filter-checkbox">
                  <input type="checkbox" value="ready">
                  <span class="checkmark"></span>
                  <span class="label-text">Ready</span>
                </label>
              </div>
            </div>

          </div>
        </div>

        <!-- Mobile version -->
        <div class="filters-mobile">
          {% with filters="type:Type:All types,area:Area:All areas,rooms:Rooms:Any sizes,price:Price:Any price,status:Status:All statuses" %}
          {% for f in filters|make_list %}
          <!-- Рендерится через JS -->
          {% endfor %}
          {% endwith %}
          
          <div class="mobile-filter-item" data-filter="type">
            <div class="mobile-filter-header">
              <span class="cf-dot"></span>
              <h6>Type</h6>
            </div>
            <div class="mobile-filter-select">
              <span>All types</span>
              <svg width="13" height="8" viewBox="0 0 13 8" fill="none">
                <path d="M1 1L6.5 6.5L12 1" stroke="#232323" stroke-width="1.5"/>
              </svg>
            </div>
          </div>

          <div class="mobile-filter-item" data-filter="area">
            <div class="mobile-filter-header">
              <span class="cf-dot"></span>
              <h6>Area</h6>
            </div>
            <div class="mobile-filter-select">
              <span>All areas</span>
              <svg width="13" height="8" viewBox="0 0 13 8" fill="none">
                <path d="M1 1L6.5 6.5L12 1" stroke="#232323" stroke-width="1.5"/>
              </svg>
            </div>
          </div>

          <div class="mobile-filter-item" data-filter="rooms">
            <div class="mobile-filter-header">
              <span class="cf-dot"></span>
              <h6>Rooms</h6>
            </div>
            <div class="mobile-filter-select">
              <span>Any sizes</span>
              <svg width="13" height="8" viewBox="0 0 13 8" fill="none">
                <path d="M1 1L6.5 6.5L12 1" stroke="#232323" stroke-width="1.5"/>
              </svg>
            </div>
          </div>

          <div class="mobile-filter-item" data-filter="price">
            <div class="mobile-filter-header">
              <span class="cf-dot"></span>
              <h6>Price</h6>
            </div>
            <div class="mobile-filter-select">
              <span>Any price</span>
              <svg width="13" height="8" viewBox="0 0 13 8" fill="none">
                <path d="M1 1L6.5 6.5L12 1" stroke="#232323" stroke-width="1.5"/>
              </svg>
            </div>
          </div>

          <div class="mobile-filter-item" data-filter="status">
            <div class="mobile-filter-header">
              <span class="cf-dot"></span>
              <h6>Status</h6>
            </div>
            <div class="mobile-filter-select">
              <span>All statuses</span>
              <svg width="13" height="8" viewBox="0 0 13 8" fill="none">
                <path d="M1 1L6.5 6.5L12 1" stroke="#232323" stroke-width="1.5"/>
              </svg>
            </div>
          </div>
        </div>

      </div>
      <div class="col-12 col-lg-3">
        <div class="filter-button-wrapper mt10 mt30-xs">
          <button type="button" id="applyFilters" class="wdt-button button-cta is-nm concierge-cta">
            Find property
            <i class="wdt-button__icon" aria-hidden="true"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
/* Desktop styles */
.filters-desktop {
  display: block;
}

.filters-mobile {
  display: none;
}

.filters-wrapper {
  display: flex;
  margin-bottom: 27px;
}

.filters-wrapper2 {
  display: flex;
}

.filter-column {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.filter-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.cf-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: linear-gradient(90deg, #F0987D 0%, #CE7F63 16.83%, #FFBEA4 28.85%, #CF795F 60.1%, #FFAC93 69.71%, #D7785B 83.65%, #EA9278 97.12%);
  flex-shrink: 0;
}

.filter-header h6 {
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
  font-size: 16px;
  line-height: 120%;
  color: #FFFFFF;
  margin: 0;
}

.filter-options {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.filter-checkbox {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  position: relative;
}

.filter-checkbox input[type="checkbox"] {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  width: 20px;
  height: 20px;
}

.filter-checkbox .checkmark {
  width: 20px;
  height: 20px;
  background: rgba(39, 39, 39, 0.2);
  border: 0.3px solid #E6E6E6;
  border-radius: 2px;
  flex-shrink: 0;
  position: relative;
}

.filter-checkbox input[type="checkbox"]:checked ~ .checkmark {
  border-color: #EA9278;
}

.filter-checkbox input[type="checkbox"]:checked ~ .checkmark:after {
  content: "";
  position: absolute;
  left: 20%;
  top: 20%;
  width: 60%;
  height: 60%;
  background: #FFFFFF;
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") no-repeat center;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E") no-repeat center;
}

.filter-checkbox .label-text {
  font-family: 'Manrope', sans-serif;
  font-weight: 600;
  font-size: 15px;
  line-height: 120%;
  color: #A0A0A0;
}

.filter-divider {
  width: 100%;
  height: 1px;
  background: rgba(255, 255, 255, 0.2);
}

.filter-button-wrapper {
  display: flex;
  justify-content: end;
}

/* Mobile styles */
@media (max-width: 991px) {
  .filters-desktop {
    display: none;
  }

  .filters-mobile {
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 0;
  }

  .mobile-filter-item {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .mobile-filter-header {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .mobile-filter-header h6 {
    font-weight: 600;
    font-size: 16px;
    line-height: 120%;
    color: #FFFFFF;
    margin: 0;
  }

  .mobile-filter-select {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 15px 20px;
    background: #E6E6E6;
    border-radius: 100px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .mobile-filter-select:hover {
    background: #d9d9d9;
  }

  .mobile-filter-select span {
    font-family: 'Manrope', sans-serif;
    font-weight: 600;
    font-size: 12px;
    line-height: 120%;
    color: #A0A0A0;
  }

  .mobile-filter-select svg {
    flex-shrink: 0;
  }

  .filter-button-wrapper {
    margin-top: 20px;
  }

  .wdt-button.button-cta {
    width: 100%;
    justify-content: center;
  }
}
</style>